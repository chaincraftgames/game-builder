{
  "gameRules": "\n# Weapon Inventor Game Rules\n\n## Overview\nA creative twist on rock-paper-scissors where players invent their own weapons and compete in a best-of-3 match.\n\n## Setup Phase\n1. Each player must invent exactly 3 unique weapons with creative names\n2. The system secretly assigns each weapon to one of the classic RPS types (rock, paper, or scissors)\n3. Players cannot see which RPS type their weapons (or opponents' weapons) map to\n\n## Match Phase\n1. The match consists of up to 3 rounds (best-of-3 format)\n2. Each round, both players simultaneously select one of their 3 invented weapons\n3. The system resolves the round using standard rock-paper-scissors mechanics:\n   - Rock beats Scissors\n   - Scissors beats Paper\n   - Paper beats Rock\n   - Same type results in a tie\n4. After each round, the system generates a humorous narrative describing how the weapons clashed\n5. The winner of each round earns 1 point (rounds won)\n\n## Victory Conditions\n- First player to win 2 rounds wins the match\n- The game ends immediately when a player reaches 2 rounds won\n- Maximum of 3 rounds can be played\n\n## Gameplay Flow\n1. **Invention Phase**: Players create their 3 weapons\n2. **Round Start**: Players select weapons for the current round\n3. **Resolution**: System reveals selections, resolves outcome, and displays narrative\n4. **Continue or End**: If no player has 2 wins, proceed to next round; otherwise, game ends with a winner declared\n",
  "stateSchema": "{\"type\":\"object\",\"properties\":{\"game\":{\"type\":\"object\",\"properties\":{\"currentPhase\":{\"type\":\"string\",\"description\":\"Current phase of the game\"},\"gameEnded\":{\"type\":\"boolean\",\"description\":\"Whether the game has ended\"},\"gameError\":{\"description\":\"Error state if game encountered a fatal error\"},\"publicMessage\":{\"type\":\"string\",\"description\":\"Message visible to all players\"},\"currentRound\":{\"type\":\"number\",\"description\":\"Track which round (1-3) is currently being played\"},\"roundOutcome\":{\"type\":\"string\",\"description\":\"Narrative and outcome of completed round\"},\"weaponMappings\":{\"type\":\"object\",\"additionalProperties\":{\"type\":\"string\",\"enum\":[\"rock\",\"paper\",\"scissors\"]},\"description\":\"Secret RPS mappings for all 6 weapons in match (weapon name -> RPS type)\"}},\"additionalProperties\":false,\"required\":[\"currentPhase\",\"gameEnded\",\"publicMessage\",\"currentRound\",\"roundOutcome\",\"weaponMappings\"]},\"players\":{\"type\":\"object\",\"additionalProperties\":{\"type\":\"object\",\"properties\":{\"ready\":{\"type\":\"boolean\",\"description\":\"Whether player is ready\"},\"illegalActionCount\":{\"type\":\"number\",\"description\":\"Number of illegal actions taken by the player\"},\"privateMessage\":{\"type\":\"string\",\"description\":\"Private message to the player\"},\"actionsAllowed\":{\"type\":[\"boolean\",\"null\"],\"description\":\"Whether the player is currently allowed to take actions\"},\"actionRequired\":{\"type\":\"boolean\",\"description\":\"If true, the game cannot proceed until this player takes an action\"},\"weapons\":{\"type\":\"object\",\"additionalProperties\":{\"type\":\"string\"},\"description\":\"Store player's 3 invented weapons (weapon name -> weapon description)\"},\"roundsWon\":{\"type\":\"number\",\"description\":\"Track rounds won by each player in current match\"},\"selectedWeapon\":{\"type\":\"string\",\"description\":\"Player's weapon choice for current round\"}},\"additionalProperties\":false,\"required\":[\"ready\",\"actionRequired\",\"illegalActionCount\",\"weapons\",\"roundsWon\",\"selectedWeapon\"]}}},\"additionalProperties\":false,\"required\":[\"game\",\"players\"]}",
  "stateTransitions": "{\n  \"phases\": [\n    \"init\",\n    \"weapon_setup\",\n    \"round_start\",\n    \"weapon_selection\",\n    \"round_resolution\",\n    \"match_check\",\n    \"finished\"\n  ],\n  \"phaseMetadata\": [\n    {\n      \"phase\": \"init\",\n      \"requiresPlayerInput\": false\n    },\n    {\n      \"phase\": \"weapon_setup\",\n      \"requiresPlayerInput\": true\n    },\n    {\n      \"phase\": \"round_start\",\n      \"requiresPlayerInput\": false\n    },\n    {\n      \"phase\": \"weapon_selection\",\n      \"requiresPlayerInput\": true\n    },\n    {\n      \"phase\": \"round_resolution\",\n      \"requiresPlayerInput\": false\n    },\n    {\n      \"phase\": \"match_check\",\n      \"requiresPlayerInput\": false\n    },\n    {\n      \"phase\": \"finished\",\n      \"requiresPlayerInput\": false\n    }\n  ],\n  \"transitions\": [\n    {\n      \"id\": \"initialize_game\",\n      \"fromPhase\": \"init\",\n      \"toPhase\": \"weapon_setup\",\n      \"checkedFields\": [\n        \"game.currentPhase\",\n        \"playersCount\"\n      ],\n      \"preconditions\": [\n        {\n          \"id\": \"game_is_init\",\n          \"logic\": {\n            \"==\": [\n              {\n                \"var\": \"game.currentPhase\"\n              },\n              \"init\"\n            ]\n          },\n          \"deterministic\": true,\n          \"explain\": \"Check if game.currentPhase equals 'init'\"\n        },\n        {\n          \"id\": \"exactly_two_players\",\n          \"logic\": {\n            \"==\": [\n              {\n                \"var\": \"playersCount\"\n              },\n              2\n            ]\n          },\n          \"deterministic\": true,\n          \"explain\": \"Verify exactly 2 players are in the game\"\n        }\n      ],\n      \"humanSummary\": \"Initialize game state and transition to weapon setup phase\"\n    },\n    {\n      \"id\": \"both_weapons_ready\",\n      \"fromPhase\": \"weapon_setup\",\n      \"toPhase\": \"round_start\",\n      \"checkedFields\": [\n        \"players[*].ready\",\n        \"players[*].weapons\"\n      ],\n      \"preconditions\": [\n        {\n          \"id\": \"all_players_ready\",\n          \"logic\": {\n            \"allPlayers\": [\n              \"ready\",\n              \"==\",\n              true\n            ]\n          },\n          \"deterministic\": true,\n          \"explain\": \"Check that all players have ready set to true\"\n        },\n        {\n          \"id\": \"all_players_weapons_finalized\",\n          \"logic\": {\n            \"allPlayers\": [\n              \"weapons\",\n              \"!=\",\n              null\n            ]\n          },\n          \"deterministic\": true,\n          \"explain\": \"Check that all players have weapons defined (weapons object exists and is not null)\"\n        }\n      ],\n      \"humanSummary\": \"Both players have finalized weapons; begin round 1\"\n    },\n    {\n      \"id\": \"begin_round\",\n      \"fromPhase\": \"round_start\",\n      \"toPhase\": \"weapon_selection\",\n      \"checkedFields\": [\n        \"game.currentRound\",\n        \"players[*].actionRequired\"\n      ],\n      \"preconditions\": [\n        {\n          \"id\": \"round_is_valid\",\n          \"logic\": {\n            \"and\": [\n              {\n                \">=\": [\n                  {\n                    \"var\": \"game.currentRound\"\n                  },\n                  1\n                ]\n              },\n              {\n                \"<=\": [\n                  {\n                    \"var\": \"game.currentRound\"\n                  },\n                  3\n                ]\n              }\n            ]\n          },\n          \"deterministic\": true,\n          \"explain\": \"Verify current round is between 1 and 3 inclusive\"\n        },\n        {\n          \"id\": \"action_required_set\",\n          \"logic\": {\n            \"allPlayers\": [\n              \"actionRequired\",\n              \"==\",\n              true\n            ]\n          },\n          \"deterministic\": true,\n          \"explain\": \"Check that all players have actionRequired flag set to true\"\n        }\n      ],\n      \"humanSummary\": \"Round is ready; players must now select their weapons\"\n    },\n    {\n      \"id\": \"both_weapons_submitted\",\n      \"fromPhase\": \"weapon_selection\",\n      \"toPhase\": \"round_resolution\",\n      \"checkedFields\": [\n        \"players[*].selectedWeapon\",\n        \"players[*].actionRequired\"\n      ],\n      \"preconditions\": [\n        {\n          \"id\": \"all_players_selected_weapon\",\n          \"logic\": {\n            \"allPlayers\": [\n              \"selectedWeapon\",\n              \"!=\",\n              null\n            ]\n          },\n          \"deterministic\": true,\n          \"explain\": \"Check that all players have submitted a weapon selection (selectedWeapon is not null)\"\n        },\n        {\n          \"id\": \"no_action_required\",\n          \"logic\": {\n            \"allPlayers\": [\n              \"actionRequired\",\n              \"==\",\n              false\n            ]\n          },\n          \"deterministic\": true,\n          \"explain\": \"Verify all players have completed their actions (actionRequired is false)\"\n        }\n      ],\n      \"humanSummary\": \"Both weapon selections received; resolve round outcome\"\n    },\n    {\n      \"id\": \"resolve_round_outcome\",\n      \"fromPhase\": \"round_resolution\",\n      \"toPhase\": \"match_check\",\n      \"checkedFields\": [\n        \"players[*].selectedWeapon\",\n        \"game.weaponMappings\",\n        \"game.roundOutcome\"\n      ],\n      \"preconditions\": [\n        {\n          \"id\": \"both_weapons_valid\",\n          \"logic\": {\n            \"allPlayers\": [\n              \"selectedWeapon\",\n              \"!=\",\n              null\n            ]\n          },\n          \"deterministic\": true,\n          \"explain\": \"Verify both players have valid weapon selections before resolution\"\n        },\n        {\n          \"id\": \"mappings_exist\",\n          \"logic\": {\n            \"!=\": [\n              {\n                \"var\": \"game.weaponMappings\"\n              },\n              null\n            ]\n          },\n          \"deterministic\": true,\n          \"explain\": \"Check that weapon mappings exist in game state\"\n        }\n      ],\n      \"humanSummary\": \"Determine round winner via RPS mechanics and generate narrative\"\n    },\n    {\n      \"id\": \"player_wins_match\",\n      \"fromPhase\": \"match_check\",\n      \"toPhase\": \"finished\",\n      \"checkedFields\": [\n        \"players[*].roundsWon\"\n      ],\n      \"preconditions\": [\n        {\n          \"id\": \"player_reached_two_wins\",\n          \"logic\": {\n            \"anyPlayer\": [\n              \"roundsWon\",\n              \">=\",\n              2\n            ]\n          },\n          \"deterministic\": true,\n          \"explain\": \"Check if any player has won 2 or more rounds, ending the match\"\n        }\n      ],\n      \"humanSummary\": \"One player has won 2 rounds; match ends\"\n    },\n    {\n      \"id\": \"continue_to_next_round\",\n      \"fromPhase\": \"match_check\",\n      \"toPhase\": \"round_start\",\n      \"checkedFields\": [\n        \"players[*].roundsWon\",\n        \"game.currentRound\"\n      ],\n      \"preconditions\": [\n        {\n          \"id\": \"no_player_has_two_wins\",\n          \"logic\": {\n            \"allPlayers\": [\n              \"roundsWon\",\n              \"<\",\n              2\n            ]\n          },\n          \"deterministic\": true,\n          \"explain\": \"Verify no player has reached 2 wins yet\"\n        },\n        {\n          \"id\": \"more_rounds_available\",\n          \"logic\": {\n            \"<\": [\n              {\n                \"var\": \"game.currentRound\"\n              },\n              3\n            ]\n          },\n          \"deterministic\": true,\n          \"explain\": \"Check that current round is less than 3, allowing continuation\"\n        }\n      ],\n      \"humanSummary\": \"Match continues; advance to next round\"\n    }\n  ]\n}",
  "playerPhaseInstructions": {
    "weapon_setup": "{\n  \"phase\": \"weapon_setup\",\n  \"playerActions\": [\n    {\n      \"id\": \"finalize_weapons\",\n      \"actionName\": \"Finalize Weapons\",\n      \"description\": \"Player completes their weapon invention by submitting 3 unique weapon names. Player can invent original weapons or request AI suggestions for any or all weapons.\",\n      \"validation\": {\n        \"checks\": [\n          {\n            \"id\": \"wrongPhase\",\n            \"logic\": {\n              \"==\": [\n                {\n                  \"var\": \"game.currentPhase\"\n                },\n                \"weapon_setup\"\n              ]\n            },\n            \"errorMessage\": \"Cannot finalize weapons - not in weapon setup phase\"\n          },\n          {\n            \"id\": \"alreadyReady\",\n            \"logic\": {\n              \"!\": {\n                \"var\": \"players.{{playerId}}.ready\"\n              }\n            },\n            \"errorMessage\": \"You have already finalized your weapons\"\n          },\n          {\n            \"id\": \"exactlyThreeWeapons\",\n            \"logic\": {\n              \"==\": [\n                {\n                  \"var\": \"var://weaponCount\"\n                },\n                3\n              ]\n            },\n            \"errorMessage\": \"You must provide exactly 3 weapons\"\n          },\n          {\n            \"id\": \"allWeaponsNonEmpty\",\n            \"logic\": {\n              \"and\": [\n                {\n                  \"!!\": {\n                    \"var\": \"input.weapon1\"\n                  }\n                },\n                {\n                  \"!!\": {\n                    \"var\": \"input.weapon2\"\n                  }\n                },\n                {\n                  \"!!\": {\n                    \"var\": \"input.weapon3\"\n                  }\n                }\n              ]\n            },\n            \"errorMessage\": \"All weapon names must be non-empty\"\n          },\n          {\n            \"id\": \"uniqueWeapons\",\n            \"logic\": {\n              \"and\": [\n                {\n                  \"!=\": [\n                    {\n                      \"var\": \"input.weapon1\"\n                    },\n                    {\n                      \"var\": \"input.weapon2\"\n                    }\n                  ]\n                },\n                {\n                  \"!=\": [\n                    {\n                      \"var\": \"input.weapon1\"\n                    },\n                    {\n                      \"var\": \"input.weapon3\"\n                    }\n                  ]\n                },\n                {\n                  \"!=\": [\n                    {\n                      \"var\": \"input.weapon2\"\n                    },\n                    {\n                      \"var\": \"input.weapon3\"\n                    }\n                  ]\n                }\n              ]\n            },\n            \"errorMessage\": \"All weapon names must be unique\"\n          }\n        ]\n      },\n      \"mechanicsGuidance\": {\n        \"rules\": [\n          \"Validate weapon names are creative/absurd as intended (not just generic)\",\n          \"Ensure names are reasonable length (5-50 characters)\",\n          \"Check for offensive content and reject if found\",\n          \"Accept weapons if they meet creativity and appropriateness standards\"\n        ],\n        \"computation\": \"Validate each weapon name for creativity, appropriateness, and length. If all pass, accept submission.\"\n      },\n      \"stateDelta\": [\n        {\n          \"op\": \"set\",\n          \"path\": \"players.{{playerId}}.weapons.weapon1\",\n          \"value\": \"{{input.weapon1}}\"\n        },\n        {\n          \"op\": \"set\",\n          \"path\": \"players.{{playerId}}.weapons.weapon2\",\n          \"value\": \"{{input.weapon2}}\"\n        },\n        {\n          \"op\": \"set\",\n          \"path\": \"players.{{playerId}}.weapons.weapon3\",\n          \"value\": \"{{input.weapon3}}\"\n        },\n        {\n          \"op\": \"set\",\n          \"path\": \"players.{{playerId}}.ready\",\n          \"value\": true\n        },\n        {\n          \"op\": \"set\",\n          \"path\": \"players.{{playerId}}.actionRequired\",\n          \"value\": false\n        }\n      ],\n      \"messages\": {\n        \"private\": [\n          {\n            \"to\": \"{{playerId}}\",\n            \"template\": \"Your weapons have been locked in: {{input.weapon1}}, {{input.weapon2}}, {{input.weapon3}}. Waiting for opponent...\"\n          }\n        ],\n        \"public\": null\n      },\n      \"requiredStateFields\": [\n        \"game.currentPhase\",\n        \"players.{{playerId}}.ready\",\n        \"players.{{playerId}}.weapons\"\n      ]\n    }\n  ]\n}",
    "weapon_selection": "{\n  \"phase\": \"weapon_selection\",\n  \"playerActions\": [\n    {\n      \"id\": \"select_weapon\",\n      \"actionName\": \"Select Weapon for Round\",\n      \"description\": \"Player chooses one of their 3 weapons to use in the current round. Selection is simultaneous and secret until both players submit.\",\n      \"validation\": {\n        \"checks\": [\n          {\n            \"id\": \"wrongPhase\",\n            \"logic\": {\n              \"==\": [\n                {\n                  \"var\": \"game.currentPhase\"\n                },\n                \"weapon_selection\"\n              ]\n            },\n            \"errorMessage\": \"Cannot select weapon - not in weapon selection phase\"\n          },\n          {\n            \"id\": \"alreadySubmitted\",\n            \"logic\": {\n              \"!\": {\n                \"var\": \"players.{{playerId}}.selectedWeapon\"\n              }\n            },\n            \"errorMessage\": \"You have already submitted your weapon choice for this round\"\n          },\n          {\n            \"id\": \"validWeapon\",\n            \"logic\": {\n              \"in\": [\n                {\n                  \"var\": \"input.weaponName\"\n                },\n                [\n                  {\n                    \"var\": \"players.{{playerId}}.weapons.weapon1\"\n                  },\n                  {\n                    \"var\": \"players.{{playerId}}.weapons.weapon2\"\n                  },\n                  {\n                    \"var\": \"players.{{playerId}}.weapons.weapon3\"\n                  }\n                ]\n              ]\n            },\n            \"errorMessage\": \"You must select one of your three weapons\"\n          }\n        ]\n      },\n      \"mechanicsGuidance\": null,\n      \"stateDelta\": [\n        {\n          \"op\": \"set\",\n          \"path\": \"players.{{playerId}}.selectedWeapon\",\n          \"value\": \"{{input.weaponName}}\"\n        },\n        {\n          \"op\": \"set\",\n          \"path\": \"players.{{playerId}}.actionRequired\",\n          \"value\": false\n        }\n      ],\n      \"messages\": {\n        \"private\": [\n          {\n            \"to\": \"{{playerId}}\",\n            \"template\": \"You have selected {{input.weaponName}} for round {{game.currentRound}}. Waiting for opponent...\"\n          }\n        ],\n        \"public\": null\n      },\n      \"requiredStateFields\": [\n        \"game.currentPhase\",\n        \"game.currentRound\",\n        \"players.{{playerId}}.weapons\",\n        \"players.{{playerId}}.selectedWeapon\"\n      ]\n    }\n  ]\n}"
  },
  "transitionInstructions": {
    "initialize_game": "{\n  \"id\": \"initialize_game\",\n  \"transitionName\": \"Initialize Game\",\n  \"description\": \"Set up initial game state with 2 players, initialize all required fields for match, and prepare for weapon setup phase.\",\n  \"priority\": 1,\n  \"mechanicsGuidance\": null,\n  \"rngConfig\": null,\n  \"stateDelta\": [\n    {\n      \"op\": \"set\",\n      \"path\": \"game.currentPhase\",\n      \"value\": \"weapon_setup\"\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"game.currentRound\",\n      \"value\": 1\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"game.gameEnded\",\n      \"value\": false\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"game.weaponMappings\",\n      \"value\": {}\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"game.roundOutcome\",\n      \"value\": \"\"\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player1.roundsWon\",\n      \"value\": 0\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player2.roundsWon\",\n      \"value\": 0\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player1.ready\",\n      \"value\": false\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player2.ready\",\n      \"value\": false\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player1.actionRequired\",\n      \"value\": true\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player2.actionRequired\",\n      \"value\": true\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player1.weapons\",\n      \"value\": null\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player2.weapons\",\n      \"value\": null\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player1.selectedWeapon\",\n      \"value\": null\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player2.selectedWeapon\",\n      \"value\": null\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player1.illegalActionCount\",\n      \"value\": 0\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player2.illegalActionCount\",\n      \"value\": 0\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player1.actionsAllowed\",\n      \"value\": true\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player2.actionsAllowed\",\n      \"value\": true\n    }\n  ],\n  \"messages\": {\n    \"private\": [\n      {\n        \"to\": \"player1\",\n        \"template\": \"Welcome to Rock Paper Scissors: Absurd Weapon Battler! Invent or confirm 3 ridiculous weapons to battle with.\"\n      },\n      {\n        \"to\": \"player2\",\n        \"template\": \"Welcome to Rock Paper Scissors: Absurd Weapon Battler! Invent or confirm 3 ridiculous weapons to battle with.\"\n      }\n    ],\n    \"public\": {\n      \"template\": \"Game started! {{player1Name}} vs {{player2Name}}. Both players are creating their weapon arsenals.\"\n    }\n  },\n  \"requiredStateFields\": [\n    \"game.currentPhase\"\n  ]\n}",
    "both_weapons_ready": "{\n  \"id\": \"both_weapons_ready\",\n  \"transitionName\": \"Both Weapons Ready\",\n  \"description\": \"Both players have finalized their 3 weapons. Generate secret RPS mappings for all 6 weapons and advance to round 1.\",\n  \"priority\": 10,\n  \"mechanicsGuidance\": {\n    \"rules\": [\n      \"Each weapon must map to exactly one of: rock, paper, or scissors\",\n      \"Mappings are secret and never revealed to players\",\n      \"Use a deterministic but non-obvious algorithm based on weapon name characteristics\",\n      \"Same weapon name always maps to same RPS type\",\n      \"Distribute mappings reasonably across rock/paper/scissors options\"\n    ],\n    \"computation\": \"Map each of the 6 weapon names to rock, paper, or scissors using deterministic logic based on weapon name properties (length, characters, etc.). Store mappings in game.weaponMappings.\"\n  },\n  \"rngConfig\": null,\n  \"stateDelta\": [\n    {\n      \"op\": \"set\",\n      \"path\": \"game.weaponMappings\",\n      \"value\": \"{{generatedMappings}}\"\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"game.currentPhase\",\n      \"value\": \"round_start\"\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player1.actionRequired\",\n      \"value\": true\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player2.actionRequired\",\n      \"value\": true\n    }\n  ],\n  \"messages\": {\n    \"private\": [\n      {\n        \"to\": \"player1\",\n        \"template\": \"Your weapons: {{player1Weapon1}}, {{player1Weapon2}}, {{player1Weapon3}}. Round 1 is starting - select your weapon!\"\n      },\n      {\n        \"to\": \"player2\",\n        \"template\": \"Your weapons: {{player2Weapon1}}, {{player2Weapon2}}, {{player2Weapon3}}. Round 1 is starting - select your weapon!\"\n      }\n    ],\n    \"public\": {\n      \"template\": \"Both players are ready! Round 1 begins now.\"\n    }\n  },\n  \"requiredStateFields\": [\n    \"players.*.ready\",\n    \"players.*.weapons\"\n  ]\n}",
    "begin_round": "{\n  \"id\": \"begin_round\",\n  \"transitionName\": \"Begin Round\",\n  \"description\": \"Prepare for weapon selection phase of current round. Set all players to require action and clear previous round selections.\",\n  \"priority\": 20,\n  \"mechanicsGuidance\": null,\n  \"rngConfig\": null,\n  \"stateDelta\": [\n    {\n      \"op\": \"set\",\n      \"path\": \"game.currentPhase\",\n      \"value\": \"weapon_selection\"\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player1.selectedWeapon\",\n      \"value\": null\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player2.selectedWeapon\",\n      \"value\": null\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player1.actionRequired\",\n      \"value\": true\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player2.actionRequired\",\n      \"value\": true\n    }\n  ],\n  \"messages\": {\n    \"public\": {\n      \"template\": \"Round {{game.currentRound}} - Select your weapons!\"\n    }\n  },\n  \"requiredStateFields\": [\n    \"game.currentRound\",\n    \"game.currentPhase\"\n  ]\n}",
    "both_weapons_submitted": "{\n  \"id\": \"both_weapons_submitted\",\n  \"transitionName\": \"Both Weapons Submitted\",\n  \"description\": \"Both players have submitted weapon selections for the round. Proceed to round resolution.\",\n  \"priority\": 30,\n  \"mechanicsGuidance\": null,\n  \"rngConfig\": null,\n  \"stateDelta\": [\n    {\n      \"op\": \"set\",\n      \"path\": \"game.currentPhase\",\n      \"value\": \"round_resolution\"\n    }\n  ],\n  \"messages\": {\n    \"public\": {\n      \"template\": \"Both weapons chosen! Resolving round {{game.currentRound}}...\"\n    }\n  },\n  \"requiredStateFields\": [\n    \"players.*.selectedWeapon\",\n    \"players.*.actionRequired\",\n    \"game.currentRound\"\n  ]\n}",
    "resolve_round_outcome": "{\n  \"id\": \"resolve_round_outcome\",\n  \"transitionName\": \"Resolve Round Outcome\",\n  \"description\": \"Apply RPS mechanics to determine round winner, award points, generate humorous narrative, and prepare for match-check phase.\",\n  \"priority\": 40,\n  \"mechanicsGuidance\": {\n    \"rules\": [\n      \"Rock beats Scissors\",\n      \"Scissors beats Paper\",\n      \"Paper beats Rock\",\n      \"If both weapons map to the same RPS option, result is a tie (no points awarded)\",\n      \"Winning player receives 1 round point\",\n      \"Generate narrative that: (1) mentions both weapon names exactly as players named them, (2) clearly indicates winner or tie, (3) humorously explains how winning weapon defeated losing weapon (or describes absurd stalemate for ties), (4) emphasizes absurdity of the collision, (5) uses lighthearted comedic tone, (6) is 1-2 sentences maximum\"\n    ],\n    \"computation\": \"Look up secret RPS mapping for each player's weapon from game.weaponMappings, apply RPS rules to determine winner or tie, generate humorous 1-2 sentence narrative, increment winner's roundsWon (if not tie)\"\n  },\n  \"rngConfig\": null,\n  \"stateDelta\": [\n    {\n      \"op\": \"increment\",\n      \"path\": \"players.{{winnerId}}.roundsWon\",\n      \"value\": \"{{roundPoints}}\"\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"game.roundOutcome\",\n      \"value\": \"{{narrative}}\"\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"game.currentPhase\",\n      \"value\": \"match_check\"\n    }\n  ],\n  \"messages\": {\n    \"public\": {\n      \"template\": \"Round {{game.currentRound}}: {{player1Name}}'s {{player1Weapon}} vs {{player2Name}}'s {{player2Weapon}}! {{narrative}} Score: {{player1Name}} {{player1RoundsWon}}, {{player2Name}} {{player2RoundsWon}}\"\n    }\n  },\n  \"requiredStateFields\": [\n    \"players.*.selectedWeapon\",\n    \"players.*.name\",\n    \"game.weaponMappings\",\n    \"game.currentRound\"\n  ]\n}",
    "player_wins_match": "{\n  \"id\": \"player_wins_match\",\n  \"transitionName\": \"Player Wins Match\",\n  \"description\": \"One player has won 2 rounds. End the match and display final results and standings.\",\n  \"priority\": 50,\n  \"mechanicsGuidance\": null,\n  \"rngConfig\": null,\n  \"stateDelta\": [\n    {\n      \"op\": \"set\",\n      \"path\": \"game.currentPhase\",\n      \"value\": \"finished\"\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"game.gameEnded\",\n      \"value\": true\n    }\n  ],\n  \"messages\": {\n    \"private\": [\n      {\n        \"to\": \"{{winnerId}}\",\n        \"template\": \"Victory! You won the match {{player1RoundsWon}}-{{player2RoundsWon}}!\"\n      },\n      {\n        \"to\": \"{{loserId}}\",\n        \"template\": \"Defeat! You lost the match {{player1RoundsWon}}-{{player2RoundsWon}}. Better luck next time!\"\n      }\n    ],\n    \"public\": {\n      \"template\": \"Match over! {{winnerName}} wins {{player1RoundsWon}}-{{player2RoundsWon}}! Congratulations!\"\n    }\n  },\n  \"requiredStateFields\": [\n    \"players.*.roundsWon\",\n    \"players.*.name\",\n    \"game.currentRound\"\n  ]\n}",
    "continue_to_next_round": "{\n  \"id\": \"continue_to_next_round\",\n  \"transitionName\": \"Continue to Next Round\",\n  \"description\": \"No player has won 2 rounds yet and rounds remain. Increment round counter and return to round start phase.\",\n  \"priority\": 60,\n  \"mechanicsGuidance\": null,\n  \"rngConfig\": null,\n  \"stateDelta\": [\n    {\n      \"op\": \"increment\",\n      \"path\": \"game.currentRound\",\n      \"value\": 1\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"game.currentPhase\",\n      \"value\": \"round_start\"\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player1.actionRequired\",\n      \"value\": true\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"players.player2.actionRequired\",\n      \"value\": true\n    },\n    {\n      \"op\": \"set\",\n      \"path\": \"game.roundOutcome\",\n      \"value\": \"\"\n    }\n  ],\n  \"messages\": {\n    \"public\": {\n      \"template\": \"Round {{game.currentRound}} complete! Score: {{player1Name}} {{player1RoundsWon}}, {{player2Name}} {{player2RoundsWon}}. Next round starting...\"\n    }\n  },\n  \"requiredStateFields\": [\n    \"players.*.roundsWon\",\n    \"game.currentRound\"\n  ]\n}"
  }
}
